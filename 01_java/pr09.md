<h1>Projeto 01 - Conta Banc√°ria - ContaController - Parte II</h1>



Na etapa anterior, criamos a Classe **ContaController**, que implementa a Interface **ContaRepository**, que possui a assinatura dos M√©todos necess√°rios para manipular os Objetos das Classes **ContaCorrente** e **ContaPoupanca**, e armazen√°-los (em mem√≥ria) na Collection do tipo List (Classe ArrayList). Implementamos os M√©todos Listar Todas as Contas e Cadastrar Conta da Interface **ContaRepository**, e o M√©todo auxiliar Gerar Numero da Conta.

Nesta etapa, vamos continuar a implementa√ß√£o dos M√©todos da  Interface **ContaRepository** e os M√©todos auxiliares.

O Diagrama de Classes do nosso Projeto ficar√° da seguinte forma:

```mermaid
classDiagram
class Conta {
<<Abstract>>
  - numero : int
  - agencia : int
  - tipo : int
  - titular : String
  - saldo : float
  + int getNumero()
  + int getAgencia()
  + int getTipo()
  + String getTitular()
  + float getSaldo()
  + void setNumero(int numero)
  + void setAgencia(int agencia)
  + void setTipo(int tipo)
  + void setTitular(String titular)
  + void setSaldo(float saldo)
  + boolean sacar(float valor)
  + void depositar(float valor)
  + void visualizar()
}
class ContaCorrente {
  - limite : float
  + float getLimite()
  + void setLimite(float limite)
  + boolean sacar(float valor)
  + void visualizar()
}
class ContaPoupanca {
  - aniversario : int
  + int getAniversario()
  + void setAniversario(int aniversario)
  + void visualizar()
}
class ContaRepository{
<< Interface >>
+ void procurarPorNumero(int numero)
+ void listarTodas()
+ void cadastrar(Conta conta)
+ void atualizar(Conta conta)
+ void deletar(int numero)
+ void sacar(int numero, float valor)
+ void depositar(int numero, float valor)
+ void transferir(int numeroOrigem, int numeroDestino, float valor)
}
class ContaController{
+ void procurarPorNumero(int numero)
+ void listarTodas()
+ void cadastrar(Conta conta)
+ void atualizar(Conta conta)
+ void deletar(int numero)
+ void sacar(int numero, float valor)
+ void depositar(int numero, float valor)
+ void transferir(int numeroOrigem, int numeroDestino, float valor)
+ int gerarNumero()
+ Conta buscarNaCollection(int numero) 
}
Conta <|-- ContaCorrente : √â um tipo de
Conta <|-- ContaPoupanca : √â um tipo de
Conta <-- ContaRepository : Tem uma
ContaRepository <|-- ContaController : Implementa
```

<br />

<h2>üë£ Passo 01 - Implementar o M√©todo Procurar Conta por Numero</h2>

Na sequ√™ncia, vamos implementar o M√©todo Procurar Conta por Numero, mas antes, precisamos criar o M√©todo auxiliar Buscar na Collection, no final da Classe ContaController, que retornar√° um Objeto conta a partir do numero da conta, caso este Objeto exista, atrav√©s do c√≥digo abaixo:

<div align="center"><img src="https://i.imgur.com/uow1ypa.png" title="source: imgur.com" /></div>

**Linha 66:** Observe que na assinatura do M√©todo foi inserido como par√¢metro uma vari√°vel do tipo *int*, chamada **numero**, que receber√° o n√∫mero da conta que se deseja localizar. 

**Linha 67:** Atrav√©s do La√ßo de Repeti√ß√£o **for...each**, percorremos toda a **Collection listaContas**. 

Observe que a vari√°vel local **conta**, utilizada para receber um Objeto Conta a cada itera√ß√£o da Collection, definida pelo La√ßo de repeti√ß√£o, foi criada atrav√©s da palavra reservada **var**.

> **var:** √â uma palavra reservada do Java, que tem o objetivo de criar vari√°veis locais, sem a defini√ß√£o do tipo. O tipo da vari√°vel √© definido por infer√™ncia, ou seja, a palavra reservada var define o tipo da vari√°vel atrav√©s do valor de inicializa√ß√£o da vari√°vel.
>
> <div align="left"><img src="https://i.imgur.com/JSfXyzm.png" title="source: imgur.com" width="30px"/> <a href="https://docs.oracle.com/en/java/javase/13/language/local-variable-type-inference.html" target="_blank"><b>Documenta√ß√£o: Palavra Reservada var</b></a>


Assim como no c√≥digo do M√©todo **listarTodas()**, o La√ßo de Repeti√ß√£o percorre toda a Collection **listaContas**, que armazena Objetos da Classe Conta. A palavra reservada **var** entende que a vari√°vel **conta** deve ser criada como um Objeto da Classe Conta, porque receber√° um Objeto da Classe Conta.

**Linha 68:** Verifica se o Atributo **numero** (obtido atrav√©s do M√©todo getNumero()), do Objeto da Classe Conta armazenado na vari√°vel **conta** √© o mesmo que foi enviado na vari√°vel numero.

**Linha 69:** Se os n√∫meros forem iguais, o M√©todo devolve o Objeto Conta encontrado e finaliza o La√ßo de repeti√ß√£o.

**Linha 73:** Se o n√∫mero n√£o for encontrado na Collection listaContas, o M√©todo devolve um Objeto null.

M√©todo auxiliar criado, vamos implementar o c√≥digo do M√©todo Procurar Conta por Numero, atrav√©s do c√≥digo abaixo:

<div align="center"><img src="https://i.imgur.com/EkwuYgt.png" title="source: imgur.com" /></div>

**Linha 13:** Observe que na assinatura do M√©todo foi inserido como par√¢metro uma vari√°vel do tipo *int*, chamada **numero**, que receber√° o n√∫mero da conta que se deseja localizar. 

**Linha 14:** Observe que a vari√°vel local **conta**, utilizada para receber o Objeto Conta, que foi encontrado na Collection **listaContas**, foi criada atrav√©s da palavra reservada **var**. Por infer√™ncia, a palavra reservada **var** entende que a vari√°vel conta, deve ser um Objeto da Classe Conta, porque receber√° o retorno do M√©todo **buscarNaCollection**.

**Linhas 16 a 19:** Atrav√©s do La√ßo Condicional, verifica se o Objeto Conta foi encontrado. 

- Se foi encontrado, exibe os dados na tela atrav√©s do M√©todo **visualizar()**. 
- Caso contr√°rio (Objeto null), exibe na tela a mensagem informando que a conta n√£o foi encontrada.

Salve as altera√ß√µes!

Para buscar um Objeto da Classe Conta, precisamos receber o numero da Conta, via teclado. Para receber os dados via teclado, precisamos criar um "formul√°rio" para receber o numero da conta atrav√©s dos Comandos de Entrada e Sa√≠da.

<br />

<h2>üë£ Passo 02 - Inserir o M√©todo Procurar Conta por N√∫mero na Classe Menu</h2>

Agora que implementamos o M√©todo Procurar Conta por N√∫mero, vamos inserir uma chamada para este M√©todo na Classe Menu:

1. Na Classe Menu, localize o trecho de c√≥digo abaixo:

<div align="center"><img src="https://i.imgur.com/Yi2rJkc.png" title="source: imgur.com" /></div>

3. Insira o trecho de c√≥digo abaixo:

<div align="center"><img src="https://i.imgur.com/8rcXzjo.png" title="source: imgur.com" /></div>

**Linhas 119 a 120:** Foram criada a entrada de dados via teclado para a vari√°vel **numero**, que receber√° o numero da conta que dever√° ser procurada na Collection **listaContas**.

**Linha 122:** Executa o M√©todo **procurarPorNumero(int numero)**, da Classe **ContaController**, passando como par√¢metro a vari√°vel **numero**, que cont√©m o numero da conta (recebido via teclado), que dever√° ser procurada na Collection **listaContas**. 

Salve e Execute o projeto clicando no bot√£o <img src="https://i.imgur.com/t28CIT4.png" title="source: imgur.com" width="4%"/>**Run**. 

1. Ser√° aberto o Menu, que deve ser semelhante ao da figura abaixo:

<div align="center"><img src="https://i.imgur.com/knikiOc.png" title="source: imgur.com" /></div>

2. Digite a op√ß√£o **3** (indicado com uma seta verde na imagem acima) e veja o resultado abaixo:

```bash
Consultar dados da Conta - por n√∫mero

Digite o n√∫mero da conta: 
1

*********************************************************************
Dados da Conta:
*********************************************************************
Numero da Conta: 1
Ag√™ncia: 123
Tipo da Conta: Conta Corrente
Titular: Jo√£o da Silva
Saldo: 1000.0
Limite de Cr√©dito: 100.0

Pressione Enter para Continuar...
```

Observe que ao procurarmos a conta numero **1**, a conta foi encontrada e os seus dados foram exibidos na tela. 

3. Experimente repetir a opera√ß√£o e digitar o numero 10:

```bash
Consultar dados da Conta - por n√∫mero

Digite o n√∫mero da conta: 
10

A Conta n√∫mero: 10 n√£o foi encontrada!

Pressione Enter para Continuar...
```

Observe que ao procurarmos a conta numero **10**, a conta n√£o foi encontrada e uma mensagem foi exibida na tela. 

<br />

<h2>üë£ Passo 03 - Implementar o M√©todo Atualizar Conta</h2>



Na sequ√™ncia, vamos implementar o M√©todo Atualizar Conta, atrav√©s do c√≥digo abaixo:

<div align="center"><img src="https://i.imgur.com/5LZtMXh.png" title="source: imgur.com" /></div>

**Linha 38:** Observe que na assinatura do M√©todo, foi inserido como par√¢metro um Objeto da Classe Conta, chamado **conta**. Este Objeto ter√° os seus dados atualizados na Collection **listaContas**.

**Linha 39:** Antes de atualizar o Objeto Conta na Collection **listaContas**, precisamos verificar se o Objeto conta existe. Observe que foi criada a vari√°vel local **buscaConta**, para receber o Objeto da Classe Conta, que foi encontrado na Collection **listaContas**. 

O Objeto **buscaConta** foi criado atrav√©s da palavra reservada **var**. Por infer√™ncia, a palavra reservada **var** entende que a vari√°vel buscaConta, deve ser um Objeto da Classe Conta, porque receber√° o retorno do M√©todo **buscarNaCollection**.

Observe que o numero da conta, foi enviado atrav√©s do M√©todo **getNumero()** do Objeto conta.

**Linhas 41 a 45:** Atrav√©s do La√ßo Condicional, verifica se o Objeto Conta foi encontrado. 

- Se a conta foi encontrada, os dados do Objeto s√£o atualizados na Collection **listaContas** atrav√©s do M√©todo **set()**. Observe que dentro do M√©todo set, foram adicionados 2 par√¢metros:
  - **listaContas.indexOf(buscaConta):** M√©todo que identifica o √≠ndice (posi√ß√£o) do Objeto conta encontrado na Collection listaContas, ou seja, os dados atuais.
  - **conta:** O Objeto conta, que foi enviado como par√¢metro do M√©todo (dados obtidos via teclado), onde est√£o os novos dados da conta, que substituir√£o os dados atuais. 
- Caso contr√°rio (Objeto null), exibe na tela a mensagem informando que a conta n√£o foi encontrada.

Salve as altera√ß√µes!

Para atualizar os dados de um Objeto da Classe Conta, precisamos receber os novos dados da Conta, via teclado. Para receber os dados via teclado, precisamos criar um "formul√°rio" para inserir os novos dados da Conta atrav√©s dos Comandos de Entrada e Sa√≠da.

<br />

<h2>üë£ Passo 04 - Inserir o M√©todo Atualizar Conta na Classe Menu</h2>



Agora que implementamos o M√©todo Atualizar Conta, vamos inserir uma chamada para este M√©todo na Classe Menu:

Para atualizar os dados de uma conta, precisamos criar as entradas de dados, ou seja, criar um formul√°rio de cadastro, semelhante ao do M√©todo Cadastrar. 

Vamos criar o formul√°rio de atualiza√ß√£o e criar a chamada para o M√©todo Atualizar na Classe Menu

1. Na Classe Menu, localize o trecho de c√≥digo abaixo:

<div align="center"><img src="https://i.imgur.com/R3hQuRS.png" title="source: imgur.com" /></div>

2. Insira o trecho de c√≥digo abaixo:

<div align="center"><img src="https://i.imgur.com/SQ2xDNz.png" title="source: imgur.com" /></div>

**Linhas 129 a 130:** Foi criada a entrada de dados via teclado para a vari√°vel **numero**, que receber√° o numero da conta que ser√° atualizada na Collection **listaContas**.

**Linha 132:** Executa o M√©todo **buscarNaCollection(numero)**, da Classe ContaController, que localizar√° a Conta a partir do numero.

**Linha 134:** Atrav√©s do La√ßo Condicional, verifica se o Objeto Conta foi encontrado. 

Se o Objeto da Classe Conta foi encontrado, o processo de atualiza√ß√£o da conta ser√° iniciado. 

**Linhas 134 a 141:** Foram criadas as entradas de dados via teclado para as vari√°veis **agencia**, **titular** e **saldo**.

**Linha 137:** Executa o M√©todo **getTipo()**, da Classe Conta, que retornar√° qual √© o **tipo** da conta: **1** - *Conta Corrente* ou **2** - *Conta Poupan√ßa*. Esta informa√ß√£o, ser√° armazenada na vari√°vel auxiliar **tipo**.

**Linha 142:** Observe que foi adicionado o comando **skip** da Classe Scanner. O M√©todo **skip** ignora a entrada que corresponde ao padr√£o especificado, ignorando os  delimitadores. Em nosso projeto, estamos ignorando **\r** (quebra de linha), para permitir que o comando **nextLine()** leia palavras compostas. Lembre-se que o titualr possui pelo menos nome e um sobrenome.

**Linhas 148 a 166:** Foi criado um La√ßo condicional do tipo **Switch Expression**, que checar√° qual o tipo da conta. 

- Caso a conta seja do tipo **Conta Corrente (tipo 1)**, solicita a entrada de dados via teclado para a vari√°vel **limite** e executa o M√©todo **cadastrar** da Classe **ContaController**.
- Caso a conta seja do tipo **Conta Poupan√ßa (tipo 2)**, solicita a entrada de dados via teclado para a vari√°vel **aniversario** e executa o M√©todo **cadastrar** da Classe **ContaController**.
- Caso o tipo da conta n√£o seja encontrado ou seja diferente de 1 e 2, ser√° exibida uma mensagem informando que o tipo da Conta √© inv√°lido.

**Linha 153:** Observe que dentro do M√©todo **atualizar** foi criado um Objeto da Classe **ContaCorrente**, composto pelos valores das vari√°veis auxiliares, que receberam dados via teclado. 

**Linha 160:** Observe que dentro do M√©todo **atualizar** foi criado um Objeto da Classe **ContaPoupanca**, composto pelos valores das vari√°veis auxiliares, que receberam dados via teclado.

> **Switch Expression** √© uma nova sintaxe, ligeiramente modificada, para o La√ßo Condicional Switch Case. Com ele, as distin√ß√µes de caso podem ser formuladas com muito mais eleg√¢ncia, deixando o c√≥digo mais limpo.
>
> <div align="left"><img src="https://i.imgur.com/JSfXyzm.png" title="source: imgur.com" width="30px"/> <a href="https://docs.oracle.com/en/java/javase/13/language/switch-expressions.html" target="_blank"><b>Documenta√ß√£o: Switch Expressions</b></a>
> 
>

**Linhas 167 a 169 :** Caso o Objeto da Classe Conta n√£o seja encontrado (Objeto null), exibe na tela a mensagem informando que a conta n√£o foi encontrada.

Salve e Execute o projeto clicando no bot√£o <img src="https://i.imgur.com/t28CIT4.png" title="source: imgur.com" width="4%"/>**Run**. 

1. Ser√° aberto o Menu, semelhante ao da figura abaixo:

<div align="center"><img src="https://i.imgur.com/E65jsrI.png" title="source: imgur.com" /></div>

2. Digite a op√ß√£o **4** e fa√ßa a Atualiza√ß√£o dos dados da Conta Corrente numero **1**, como mostra o console abaixo:

```bash
Atualizar dados da Conta

Digite o n√∫mero da conta: 
1
Digite o Numero da Ag√™ncia: 
789
Digite o Nome do Titular: 
Jo√£o da Silva Santos
Digite o Saldo da Conta (R$): 
5000
Digite o Limite de Cr√©dito (R$): 
600

A Conta numero: 1 foi atualizada com sucesso!

Pressione Enter para Continuar...
```

3. Observe que a Conta foi Atualizada com sucesso. Pressione a tecla enter e atualize a Conta Poupan√ßa numero 3:

```bash
Atualizar dados da Conta

Digite o n√∫mero da conta: 
3
Digite o Numero da Ag√™ncia: 
321
Digite o Nome do Titular: 
Mariana dos Santos Noronha
Digite o Saldo da Conta (R$): 
4500
Digite o dia do Aniversario da Conta: 
15

A Conta numero: 3 foi atualizada com sucesso!

Pressione Enter para Continuar...
```

4. Digite a op√ß√£o 2 (indicado com uma seta verde na imagem abaixo):

<div align="center"><img src="https://i.imgur.com/Azkf3TC.png" title="source: imgur.com" /></div>

5. Veja o resultado abaixo:

```bash
Listar todas as Contas

*********************************************************************
Dados da Conta:
*********************************************************************
Numero da Conta: 1
Ag√™ncia: 789
Tipo da Conta: Conta Corrente
Titular: Jo√£o da Silva Santos
Saldo: 5000.0
Limite de Cr√©dito: 600.0

*********************************************************************
Dados da Conta:
*********************************************************************
Numero da Conta: 2
Ag√™ncia: 124
Tipo da Conta: Conta Corrente
Titular: Maria da Silva
Saldo: 2000.0
Limite de Cr√©dito: 100.0

*********************************************************************
Dados da Conta:
*********************************************************************
Numero da Conta: 3
Ag√™ncia: 321
Tipo da Conta: Conta Poupan√ßa
Titular: Mariana dos Santos Noronha
Saldo: 4500.0
Anivers√°rio da conta: 15

*********************************************************************
Dados da Conta:
*********************************************************************
Numero da Conta: 4
Ag√™ncia: 125
Tipo da Conta: Conta Poupan√ßa
Titular: Juliana Ramos
Saldo: 8000.0
Anivers√°rio da conta: 15

Pressione Enter para Continuar...
```

Observe que os dados das contas 1 e 3 foram atualizados na Collection **listaContas**.

<br />

<h2>üë£ Passo 05 - Implementar o M√©todo Deletar Conta</h2>



Para finalizar os M√©todos do CRUD, vamos implementar o M√©todo Deletar Conta, atrav√©s do c√≥digo abaixo:

<div align="center"><img src="https://i.imgur.com/eNnaqly.png" title="source: imgur.com" /></div>

**Linha 50:** Observe que na assinatura do M√©todo foi inserido como par√¢metro uma vari√°vel do tipo *int*, chamada **numero**, que receber√° o n√∫mero da conta que se deseja deletar. 

**Linha 51:** Antes de deletar o Objeto Conta na Collection **listaContas**, precisamos verificar se o Objeto conta existe. 

Observe que foi criada a vari√°vel local **conta**, para receber o Objeto da Classe Conta, que foi encontrado na Collection **listaContas**. Esse Objeto foi criado atrav√©s da palavra reservada **var**. Por infer√™ncia, a palavra reservada **var** entende que a vari√°vel conta, deve ser um Objeto da Classe Conta, porque receber√° o retorno do M√©todo **buscarNaCollection**.

**Linhas 53 a 57:** Atrav√©s do La√ßo Condicional, verifica se o Objeto Conta foi encontrado. 

- Se a conta foi encontrada, o Objeto conta ser√° apagado na Collection **listaContas** atrav√©s do M√©todo **remove()**. Observe que dentro do M√©todo **remove()**, foi adicionado como par√¢metro o Objeto conta. 
  - Observe na **Linha 54** que atrav√©s de uma La√ßo condicional, ser√° checado se a exclus√£o foi bem sucedida. Se foi bem sucedida, ser√° exibida uma mensagem informando que a exclus√£o foi efetuada com sucesso. 

- Caso contr√°rio (Objeto null), exibe na tela a mensagem informando que a conta n√£o foi encontrada.

Salve as altera√ß√µes!

Para buscar um Objeto da Classe Conta e Excluir caso seja encontrado, precisamos receber o numero da Conta, via teclado. Para receber os dados via teclado, precisamos criar um "formul√°rio" para receber o numero da conta atrav√©s dos Comandos de Entrada e Sa√≠da.

<br />

<h2>üë£ Passo 06 - Inserir o M√©todo Deletar Conta na Classe Menu</h2>

Agora que implementamos o M√©todo M√©todo Deletar Conta, vamos inserir uma chamada para este M√©todo na Classe Menu:

1. Na Classe Menu, localize o trecho de c√≥digo abaixo:

<div align="center"><img src="https://i.imgur.com/qvjul0m.png" title="source: imgur.com" /></div>

3. Insira o trecho de c√≥digo abaixo:

<div align="center"><img src="https://i.imgur.com/sk3M7kM.png" title="source: imgur.com" /></div>

**Linhas 169 a 170:** Foi criada a entrada de dados via teclado para a vari√°vel **numero**, que receber√° o numero da conta que ser√° exclu√≠da da Collection **listaContas**.

**Linha 172:** Executa o M√©todo **deletar(int numero)**, da Classe **ContaController**, passando como par√¢metro a vari√°vel **numero**, que cont√©m o numero da conta (recebido via teclado), que ser√° exclu√≠da da Collection **listaContas**. 

Salve e Execute o projeto clicando no bot√£o <img src="https://i.imgur.com/t28CIT4.png" title="source: imgur.com" width="4%"/>**Run**. 

1. Ser√° aberto o Menu, que deve ser semelhante ao da figura abaixo:

<div align="center"><img src="https://i.imgur.com/QC5Lxwa.png" title="source: imgur.com" /></div>

2. Digite a op√ß√£o **5** (indicado com uma seta verde na imagem acima) e veja o resultado abaixo:

```bash
Apagar a Conta

Digite o n√∫mero da conta: 
1

A Conta numero: 1 foi deletada com sucesso!

Pressione Enter para Continuar...
```

Observe que ao procurarmos a conta numero **1** a conta foi encontrada e deletada. Al√©m disso, uma mensagem de confirma√ß√£o foi exibida na tela. 

3. Experimente repetir a opera√ß√£o e digitar o numero 10:

```bash
Apagar a Conta

Digite o n√∫mero da conta: 
10

A Conta numero: 10 n√£o foi encontrada!

Pressione Enter para Continuar...
```

Observe que ao procurarmos a conta numero **10**, a conta n√£o foi encontrada e uma mensagem foi exibida na tela. 

Na sequ√™ncia, vamos confirmar se a conta numero 1 foi exclu√≠da:

1. Digite a op√ß√£o **3** (indicado com uma seta verde na imagem abaixo):

<div align="center"><img src="https://i.imgur.com/knikiOc.png" title="source: imgur.com" /></div>

2.  No item numero da conta, digite o numero **1** e veja o resultado abaixo:

```bash
Consultar dados da Conta - por n√∫mero

Digite o n√∫mero da conta: 
1

A Conta n√∫mero: 1 n√£o foi encontrada!

Pressione Enter para Continuar...
```

Observe que a conta numero **1** n√£o foi encontrada, confirmando que a conta foi apagada. 

<br />

<div align="left"><img src="https://i.imgur.com/JACNZiR.png" title="source: imgur.com" width="25px"/> <a href="https://github.com/rafaelq80/conta_bancaria_java/blob/08_Controller_CRUD/src/conta/controller/ContaController.java" target="_blank"><b>C√≥digo fonte: ContaController.java</b></a>

<div align="left"><img src="https://i.imgur.com/JACNZiR.png" title="source: imgur.com" width="25px"/> <a href="https://github.com/rafaelq80/conta_bancaria_java/blob/08_Controller_CRUD/src/conta/Menu.java" target="_blank"><b>C√≥digo fonte: Menu.java</b></a>

<br />

<div align="left"><img src="https://i.imgur.com/JACNZiR.png" title="source: imgur.com" width="25px"/> <a href="https://github.com/rafaelq80/conta_bancaria_java/tree/08_Controller_CRUD" target="_blank"><b>C√≥digo fonte: Projeto Conta Banc√°ria</b></a>
<br /><br />

<div align="left"><a href="README.md"><img src="https://i.imgur.com/XMgF3gl.png" title="source: imgur.com" width="3%"/>Voltar</a></div>

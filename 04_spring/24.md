<h1>Documenta√ß√£o com o SpringDoc</h1>



Uma API bem constru√≠da deve ser f√°cil de entender e utilizar. Por isso, uma documenta√ß√£o adequada √© essencial para orientar pessoas desenvolvedoras (ou profissionais de outras √°reas t√©cnicas) a consumirem seus recursos de forma r√°pida, eficiente e aut√¥noma.

<br />

<h2>1. OpenApi</h2>



A **OpenAPI** √© uma especifica√ß√£o open source que tem como objetivo padronizar a descri√ß√£o, cria√ß√£o e consumo de APIs REST. Ela define um formato padr√£o para descrever os recursos que uma API oferece, incluindo seus endpoints, os dados esperados nas requisi√ß√µes, os dados retornados nas respostas, os c√≥digos de status HTTP, os modelos de dados, os m√©todos de autentica√ß√£o, entre outros detalhes.

APIs REST s√£o amplamente utilizadas para integrar sistemas, seja consumindo servi√ßos de terceiros ou disponibilizando novos servi√ßos. A especifica√ß√£o OpenAPI facilita o design, a documenta√ß√£o, a valida√ß√£o e at√© a gera√ß√£o autom√°tica de c√≥digo para essas APIs.

<br />

<div align="left"><img src="https://i.imgur.com/EWMO1wL.png" title="source: imgur.com" width="4%"/> <a href="https://www.openapis.org/" target="_blank"><b>Site Oficial: <i>OpenApi</i></b></a></div>

<div align="left"><img src="https://i.imgur.com/EWMO1wL.png" title="source: imgur.com" width="4%"/> <a href="https://spec.openapis.org/oas/latest.html#introduction" target="_blank"><b>Documenta√ß√£o: <i>Especifica√ß√£o OpenApi</i></b></a></div>

<br />


<h2>2. Swagger</h2>



O **Swagger** √© um conjunto de ferramentas que apoia pessoas desenvolvedoras no **projeto, desenvolvimento, documenta√ß√£o e consumo de APIs REST** de forma interativa e din√¢mica, explorando integralmente os recursos da especifica√ß√£o OpenAPI.

Embora seja mais conhecido pela interface gr√°fica **Swagger UI**, o Swagger oferece tamb√©m gera√ß√£o automatizada de documenta√ß√£o, cria√ß√£o de clientes e servidores a partir da especifica√ß√£o, al√©m de recursos para testes e valida√ß√£o.

<br />

<div align="left"><img src="https://i.imgur.com/IJNY0uR.png" title="source: imgur.com" width="4%"/> <a href="https://swagger.io/" target="_blank"><b>Site Oficial: Swagger</b></a></div>

<br />


<h3>2.1. Swagger-UI</h3>



O **Swagger UI** √© uma ferramenta open source que gera uma **interface gr√°fica interativa** para visualizar e testar APIs REST a partir de documentos no padr√£o OpenAPI.

Essa interface permite explorar todos os endpoints da API, visualizar par√¢metros, tipos de dados, m√©todos HTTP e respostas esperadas ‚Äî tudo diretamente no navegador, sem necessidade de escrever c√≥digo para consumir a API.

<div align="center"><img src="https://i.imgur.com/vKKoa2c.png" title="source: imgur.com" width="90%"/></div>

<br />

<div align="left"><img src="https://i.imgur.com/IJNY0uR.png" title="source: imgur.com" width="4%"/> <a href="https://swagger.io/tools/swagger-ui/" target="_blank"><b>Site Oficial: Swagger-UI</b></a></div>

<br />


<h3>2.2. Swagger Editor</h3>



O **Swagger Editor** √© uma ferramenta open source para cria√ß√£o, edi√ß√£o e valida√ß√£o de especifica√ß√µes OpenAPI diretamente no navegador, facilitando o design colaborativo e a documenta√ß√£o de APIs REST.

<div align="center"><img src="https://i.imgur.com/ADiczZM.png?1" title="source: imgur.com" width="90%"/></div>

<br />

<div align="left"><img src="https://i.imgur.com/IJNY0uR.png" title="source: imgur.com" width="4%"/> <a href="https://editor.swagger.io/" target="_blank"><b>Site Oficial: Swagger-Editor</b></a></div>

<br />

<h2>3. SpringDoc</h2>



A biblioteca **SpringDoc OpenAPI** integra o Spring Boot √† especifica√ß√£o OpenAPI, gerando automaticamente a documenta√ß√£o da API em tempo de execu√ß√£o, baseada nas configura√ß√µes do Spring, na estrutura das classes e nas anota√ß√µes espec√≠ficas.

Ela utiliza o **Swagger UI** para renderizar uma interface interativa e permite exportar a documenta√ß√£o nos formatos JSON, YAML e HTML. A documenta√ß√£o pode ser enriquecida com anota√ß√µes do Swagger para descrever melhor endpoints, par√¢metros e respostas.

<br />

> **YAML** (recursive acronym for "YAML Ain't Markup Language") √© um formato de serializa√ß√£o de dados leg√≠vel por humanos, muito utilizado para arquivos de configura√ß√£o. √â uma alternativa simplificada e mais leg√≠vel ao XML e JSON.

<br />

<div align="left"><img src="https://i.imgur.com/VKWcUsU.png" title="source: imgur.com" width="3%"/> <a href="https://yaml.org" target="_blank"><b>Site Oficial: <i>YAML</i></b></a></div>

<div align="left"><img src="https://i.imgur.com/EWMO1wL.png" title="source: imgur.com" width="4%"/> <a href="https://springdoc.org/v2/" target="_blank"><b>Site Oficial: <i>SpringDoc - Vers√£o 2 - Spring 3</i></b></a></div>

<br />

Vamos criar a documenta√ß√£o do nosso projeto Blog Pessoal no formato digital usando a biblioteca **SpringDoc**.

<br />

<h2>üë£ Passo 01- Adicionar a Depend√™ncia do Spring Doc</h2>



Abra o arquivo pom.xml e insira a depend√™ncia do SpringDoc:

```xml
	<!-- Depend√™ncia para Gera√ß√£o do Swagger -->
	<dependency>
		<groupId>org.springdoc</groupId>
		<artifactId>springdoc-openapi-starter-webmvc-ui</artifactId>
		<version>2.8.9</version>
	 </dependency>
```

<br />

<div align="left"><img src="https://i.imgur.com/EWMO1wL.png" title="source: imgur.com" width="4%"/> <a href="https://springdoc.org" target="_blank"><b>Documenta√ß√£o: Depend√™ncia do SpringDoc</b></a></div>

<br />

> [!WARNING]
>
> No momento em que este conte√∫do foi escrito, a vers√£o mais recente da depend√™ncia **Spring Doc** era a **2.8.9**. No entanto, ao acessar este material no futuro, √© poss√≠vel que uma nova vers√£o j√° tenha sido lan√ßada.

<br />

<h2>üë£ Passo 02- Configurar o arquivo application.properties</h2>



Insira as linhas abaixo no arquivo **application.properties**, da **Source Folder Principal** (src/main/resources), logo abaixo da configura√ß√£o do Banco de dados MySQL:

<div align="left"><img src="https://i.imgur.com/VerrOi6.png" title="source: imgur.com" /></div>

**Linha 12:** Define o Caminho para a Documenta√ß√£o do OpenAPI no formato JSON.
	
**Linha 13:** Define o Caminho para a Documenta√ß√£o do Swagger-ui no formato HTML.
	
**Linha 14:** Define a ordem em que os Recursos ser√£o exibidos no Swagger-ui. Em nosso projeto, os Recursos ser√£o ordenados por M√©todo.
	
**Linha 15:** Desabilita a URL padr√£o do Swagger-ui (Exemplo no site do Swagger).

**Linha 16:** Define o nome da Package da Camada Controladora (Controller).

<br />

> [!NOTE]
>
> **ALERTA DE BSM!**
>
> *Mantenha a Aten√ß√£o aos Detalhes*
>
> Informar um caminho (path) incorreto para a camada Controller, na propriedade `springdoc.packagesToScan`, far√° com que o Swagger n√£o consiga localizar os endpoints, resultando na exibi√ß√£o da mensagem de erro *No operations defined in spec!*, conforme ilustrado na imagem abaixo:

<br />

<div align="center"><img src="https://i.imgur.com/jWy13Pq.png" title="source: imgur.com" /></div>

<br />

**Linha 17:** Define o Swagger-ui como a p√°gina inicial da aplica√ß√£o.

<br />

<h3>C√≥digo para adicionar no arquivo application.properties em src/main/resources</h3>

```properties
springdoc.api-docs.path=/v3/api-docs
springdoc.swagger-ui.path=/swagger-ui/index.html
springdoc.swagger-ui.operationsSorter=method
springdoc.swagger-ui.disable-swagger-default-url=true
springdoc.packagesToScan=com.generation.blogpessoal.controller
springdoc.swagger-ui.use-root-path=true
```

<br />

> [!CAUTION]
>
> **N√£o insira coment√°rios no arquivo application.properties.** Geralmente, durante o Deploy na nuvem, coment√°rios inseridos no arquivo application.properties podem causar erros de compila√ß√£o no projeto.

<br />

<div align="left"><img src="https://i.imgur.com/EWMO1wL.png" title="source: imgur.com" width="4%"/> <a href="https://springdoc.org/#properties" target="_blank"><b>Documenta√ß√£o: application.properties - configura√ß√µes do Spring Doc</b></a></div>

<br />

<h2>üë£ Passo 03 - Criar a Camada configuration e a Classe SwaggerConfig</h2>



A Camada **Configuration** √© respons√°vel por  implementar configura√ß√µes espec√≠ficas da aplica√ß√£o. Em nosso Projeto, vamos utilizar esta Camada para implementar a Documenta√ß√£o da API com o Swagger

1. No lado esquerdo superior, na Guia **Package explorer**, clique com o bot√£o direito do mouse sobre a Package **com.generation.blogpessoal**, na Source Folder **src/main/java** e clique na op√ß√£o  **New ü°™ Package**.

2. Na janela **New Java Package**, no item **Name**, acrescente no final do nome da Package **.configuration**, como mostra a figura abaixo:

<div align="center"><img src="https://i.imgur.com/oaQPqgK.png" title="source: imgur.com" /></div>

3. Clique no bot√£o **Finish** para concluir.

4.  Clique com o bot√£o direito do mouse sobre o **Pacote Configuration** (**com.generation.blogpessoal.configuration**), na Source Folder Principal (**src/main/java**), e na sequ√™ncia, clique na op√ß√£o **New ü°™ Class**

5. Na janela **New Java Class**, no item **Name**, digite o nome da Classe (**SwaggerConfig**), como mostra a figura abaixo:

<div align="center"><img src="https://i.imgur.com/LKkwrTA.png" title="source: imgur.com" /></div>

6. Clique no bot√£o **Finish** para concluir.

Vejamos abaixo a implementa√ß√£o da Classe **SwaggerConfig**:

<div align="left"><img src="https://i.imgur.com/482FNPo.png" title="source: imgur.com" /></div>

**Linha 1:** Atrav√©s do comando **package**, estamos informando o nome do pacote (camada), onde a Classe foi criada. Esta informa√ß√£o √© inserida automaticamente pelo STS ao criar a Classe.

**Linhas 3 a 16:** Atrav√©s do comando **import**, estamos indicando todos os pacotes que cont√©m as Classes que est√£o sendo utilizadas na Classe **SwaggerConfig**.

<div align="center"><img src="https://i.imgur.com/gVRiPoL.png" title="source: imgur.com" /></div>

Vamos analisar o c√≥digo:

**Linha 17:**  A anota√ß√£o **`@Configuration`** indica que a classe √© uma **fonte de defini√ß√µes de configura√ß√£o** para o Spring.  Classes marcadas com **`@Configuration`** s√£o processadas pelo container do Spring para gerar e registrar **Beans** no contexto da aplica√ß√£o.

Esse recurso √© fundamental para a **configura√ß√£o baseada em Java** (*Java-based configuration*), substituindo ou complementando arquivos XML. O Spring garante que cada Bean declarado nessa classe seja instanciado **apenas uma vez** (Singleton por padr√£o), a menos que explicitamente configurado de outra forma.

**Linha 21:** A anota√ß√£o **`@Bean`**, quando aplicada a um m√©todo dentro de uma classe anotada com **`@Configuration`**, instrui o Spring a executar esse m√©todo e registrar o objeto retornado como um **Bean gerenciado**. Isso permite que o objeto seja injetado em qualquer parte da aplica√ß√£o, utilizando **inje√ß√£o de depend√™ncia**.

> **Bean:**
>  No Spring, um **Bean** √© qualquer objeto cuja cria√ß√£o, configura√ß√£o e ciclo de vida s√£o controlados pelo container do framework. Os Beans s√£o os **blocos fundamentais** que comp√µem a aplica√ß√£o Spring.
>
> **Principais formas de criar Beans:**
>
> - Anotando classes com **`@Component`**, **`@Service`**, **`@Repository`**, **`@Controller`**, entre outras especializa√ß√µes;
> - Declarando m√©todos anotados com **`@Bean`** dentro de classes marcadas com **`@Configuration`**;
> - Registrando Beans para classes de terceiros (que voc√™ n√£o pode modificar) via **`@Bean`**.
>
> **Diferen√ßa para `@Autowired`:** `@Autowired` n√£o cria Beans, mas injeta no c√≥digo os Beans j√° gerenciados pelo Spring, permitindo o uso direto dessas inst√¢ncias.

**Linha 23:** Cria e retorna um objeto da classe **`OpenAPI`**, representando a especifica√ß√£o OpenAPI do Projeto Blog Pessoal. Esse objeto √© utilizado pelo **Springdoc** para gerar automaticamente a documenta√ß√£o Swagger.

**Linhas 24 a 27:** Configuram as informa√ß√µes gerais da API por meio do objeto **`Info`**, incluindo:

- **T√≠tulo** (*title*),
- **Descri√ß√£o** (*description*),
- **Vers√£o** (*version*).

Esses dados s√£o exibidos no topo da documenta√ß√£o Swagger.

**Linhas 28 a 30:** Definem as informa√ß√µes de licen√ßa da API com o objeto **`License`**, especificando:

- **Nome** (*name*) da licen√ßa,
- **URL** (*url*) com o texto legal completo ou termos de uso.

**Linhas 31 a 34:** Configuram os dados de contato do respons√°vel pela API usando o objeto **`Contact`**, incluindo:

- **Nome** (*name*),
- **URL** (*url*) para o site ou perfil profissional,
- **E-mail** (*email*) para contato.

> [!CAUTION]
>
> As propriedades **`name`**, **`url`** e **`email`** aceitam **apenas um valor cada**. 
>
> Caso seja necess√°rio indicar m√∫ltiplos contatos, recomenda-se criar um canal √∫nico (por exemplo, p√°gina de equipe ou endere√ßo de e-mail compartilhado).

**Linhas 35 a 37:** Definem **documenta√ß√£o externa** (*ExternalDocumentation*) com:

- **Descri√ß√£o** (*description*),
- **URL** (*url*) para recursos adicionais, como reposit√≥rios GitHub, wikis ou sites oficiais.

<br />

> [!NOTE]
>
> **ALERTA DE BSM!**
>
> *Mantenha a Aten√ß√£o aos Detalhes*
>
> As informa√ß√µes de contato e documenta√ß√£o externa devem ser preenchidas com dados reais do desenvolvedor ou da equipe respons√°vel.
>
> No caso de um **Projeto Integrador**, utilize os dados do grupo ou da Organiza√ß√£o no Github.

<br />

**Linha 38:** O m√©todo **`components`** adiciona **componentes reutiliz√°veis** √† especifica√ß√£o OpenAPI, como esquemas de seguran√ßa, modelos de dados e par√¢metros comuns.

**Linha 39:** Registra um **esquema de seguran√ßa** chamado `"jwt_auth"`, configurado para autentica√ß√£o via **JWT (JSON Web Token)**. O m√©todo `createSecurityScheme` retorna um objeto **`SecurityScheme`** com:

- **Tipo de autentica√ß√£o**: `"http"`,
- **Esquema**: `"bearer"`,
- **Formato**: `"JWT"`.

Essa configura√ß√£o informa ao Swagger como os tokens devem ser enviados nas requisi√ß√µes.

**Linha 40:**  O m√©todo **`addSecurityItem`** define que a API exige o esquema `"jwt_auth"` para os endpoints protegidos.  Assim, a documenta√ß√£o exibir√° um bot√£o para inserir o token JWT, que ser√° inclu√≠do no **cabe√ßalho `Authorization`** de todas as requisi√ß√µes protegidas.

<br />

<div align="left"><img src="https://i.imgur.com/EWMO1wL.png" title="source: imgur.com" width="4%"/> <a href="https://spec.openapis.org/oas/latest.html#openapi-specification" target="_blank"><b>Documenta√ß√£o: OpenApi()</b></a></div>

<div align="left"><img src="https://i.imgur.com/wDz2IzB.png" title="source: imgur.com" width="4%"/> <a href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/context/annotation/Configuration.html" target="_blank"><b>Documenta√ß√£o: @Configuration</b></a></div>

<div align="left"><img src="https://i.imgur.com/wDz2IzB.png" title="source: imgur.com" width="4%"/> <a href="https://www.baeldung.com/spring-bean" target="_blank"><b>Artigo: Spring Bean</b></a></div>

<div align="left"><img src="https://i.imgur.com/wDz2IzB.png" title="source: imgur.com" width="4%"/>  <a href="https://docs.oracle.com/javase/8/docs/api/java/beans/package-summary.html" target="_blank"><b>Documenta√ß√£o: Java Beans</b></a></div>

<div align="left"><img src="https://i.imgur.com/ZENGh6G.png" title="source: imgur.com" width="4%"/> <a href="https://opensource.guide/pt/legal/" target="_blank"><b>Artigo: O Lado Legal do Open Source</b></a></div>

<br />

<div align="left"><img src="https://i.imgur.com/n67O31u.png" title="source: imgur.com" /></div>

A interface **`OpenApiCustomizer`** (fornecida pelo **Springdoc OpenAPI**) permite **personalizar dinamicamente** a documenta√ß√£o gerada pelo Swagger, seguindo a especifica√ß√£o **OpenAPI 3**.

O m√©todo apresentado √© um **Bean** que insere descri√ß√µes personalizadas para **todas as respostas HTTP** de todos os endpoints documentados.

**Linha 46:** Cria o **Bean** do tipo **`OpenApiCustomizer`**, que ser√° automaticamente aplicado pelo Springdoc para modificar o objeto **`OpenAPI`** antes de a documenta√ß√£o ser renderizada no Swagger UI.

**Linha 47:** O primeiro loop percorre todos os **recursos da API** (*paths*) obtidos pelo m√©todo `getPaths()`, que retorna um `Map<String, PathItem>` ‚Äî cada entrada corresponde a um endpoint registrado.

Dentro desse loop, o segundo loop percorre todas as **opera√ß√µes HTTP** (GET, POST, PUT, DELETE, entre outras.) de cada **`PathItem`**, usando o m√©todo `readOperations()`.

**Linha 49:** Obt√©m o objeto **`ApiResponses`** de cada opera√ß√£o por meio do m√©todo `getResponses()`. Esse objeto representa todas as respostas HTTP documentadas para aquela opera√ß√£o.

**Linhas 51 a 58:** Adiciona ou substitui respostas HTTP no objeto **`ApiResponses`** utilizando o m√©todo `addApiResponse(String statusCode, ApiResponse apiResponse)`.

Cada chamada associa um c√≥digo de status (por exemplo, `"200"`, `"201"`) a uma nova inst√¢ncia de **`ApiResponse`**, criada pelo m√©todo auxiliar `createApiResponse(String message)`.

As mensagens personalizadas s√£o aplicadas a todos os endpoints, garantindo padroniza√ß√£o e clareza na documenta√ß√£o.

<div align="left"><img src="https://i.imgur.com/CLYMre5.png" title="source: imgur.com" /></div>

**Linha 64:** Declara o m√©todo **`createApiResponse`** como `private`, restringindo seu uso √† pr√≥pria classe. O m√©todo retorna um objeto do tipo **`ApiResponse`**, que representa a documenta√ß√£o de uma resposta HTTP. Recebe como par√¢metro uma **`String message`**, usada para descrever a resposta.

**Linha 66:** Cria e retorna imediatamente uma nova inst√¢ncia de **`ApiResponse`** utilizando seu construtor padr√£o (`new ApiResponse()`). 

Na sequ√™ncia, chama o m√©todo **`.description(message)`** para definir a descri√ß√£o dessa resposta com o valor recebido no par√¢metro `message`. Esse m√©todo retorna a pr√≥pria inst√¢ncia de **`ApiResponse`** (padr√£o *fluent API*), permitindo o encadeamento de chamadas.

**Linha 70:** Declara o m√©todo **`createSecurityScheme`** como `private`, tornando-o acess√≠vel apenas dentro da pr√≥pria classe.

O tipo de retorno √© **`SecurityScheme`** (classe do pacote `io.swagger.v3.oas.models.security`), respons√°vel por definir um esquema de autentica√ß√£o no padr√£o OpenAPI. Esse m√©todo n√£o recebe par√¢metros, pois cria sempre a mesma configura√ß√£o de seguran√ßa para a API.

**Linhas 71 a 76:**  Cria e retorna uma nova inst√¢ncia de **`SecurityScheme`** configurada para autentica√ß√£o via **JWT Bearer Token**:

- **Linha 72:** O m√©todo `.name` ‚Äî Define o nome do esquema de seguran√ßa, que deve coincidir com o registrado no m√©todo`components().addSecuritySchemes(...)`.
- **Linha 73:** O m√©todo `.type` ‚Äî Especifica que o mecanismo de autentica√ß√£o √© baseado no protocolo HTTP.
- **Linha 74:** O m√©todo `.scheme` ‚Äî Define o esquema de autentica√ß√£o como Bearer Token.
- **Linha 75:** O m√©todo `.bearerFormat` ‚Äî Indica que o token segue o formato JSON Web Token (JWT).
- **Linha 76:** O m√©todo `.description` ‚Äî Adiciona instru√ß√µes vis√≠veis no Swagger UI, explicando que o usu√°rio deve informar apenas o token, pois o prefixo `"Bearer "` ser√° inclu√≠do automaticamente.

<br />

üíæ **Salve as altera√ß√µes antes de prosseguir ( File ü°™ Save All )!**

<br />

A vers√£o final do c√≥digo, voc√™ confere abaixo:

```java
package com.generation.blogpessoal.configuration;

import org.springdoc.core.customizers.OpenApiCustomizer;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

import io.swagger.v3.oas.models.Components;
import io.swagger.v3.oas.models.ExternalDocumentation;
import io.swagger.v3.oas.models.OpenAPI;
import io.swagger.v3.oas.models.info.Contact;
import io.swagger.v3.oas.models.info.Info;
import io.swagger.v3.oas.models.info.License;
import io.swagger.v3.oas.models.responses.ApiResponse;
import io.swagger.v3.oas.models.responses.ApiResponses;
import io.swagger.v3.oas.models.security.SecurityRequirement;
import io.swagger.v3.oas.models.security.SecurityScheme;

@Configuration
public class SwaggerConfig {
	 
	@Bean
    OpenAPI springBlogPessoalOpenAPI() {
        return new OpenAPI()
            .info(new Info()
                .title("Projeto Blog Pessoal")
                .description("Projeto Blog Pessoal - Generation Brasil")
                .version("v0.0.1")
                .license(new License()
                    .name("Generation Brasil")
                    .url("https://brazil.generation.org/"))
                .contact(new Contact()
                    .name("Generation Brasil")
                    .url("https://github.com/conteudoGeneration")
                    .email("conteudogeneration@generation.org")))
            .externalDocs(new ExternalDocumentation()
                .description("Github")
                .url("https://github.com/conteudoGeneration/"))
            .components(new Components()
                    .addSecuritySchemes("jwt_auth", createSecurityScheme()))
                .addSecurityItem(new SecurityRequirement().addList("jwt_auth"));
    }

	@Bean
	OpenApiCustomizer customerGlobalHeaderOpenApiCustomiser() {

		return openApi -> {
			openApi.getPaths().values().forEach(pathItem -> pathItem.readOperations().forEach(operation -> {

				ApiResponses apiResponses = operation.getResponses();

				apiResponses.addApiResponse("200", createApiResponse("Sucesso!"));
				apiResponses.addApiResponse("201", createApiResponse("Objeto Persistido!"));
				apiResponses.addApiResponse("204", createApiResponse("Objeto Exclu√≠do!"));
				apiResponses.addApiResponse("400", createApiResponse("Erro na Requisi√ß√£o!"));
				apiResponses.addApiResponse("401", createApiResponse("Acesso N√£o Autorizado!"));
				apiResponses.addApiResponse("403", createApiResponse("Acesso Proibido!"));
				apiResponses.addApiResponse("404", createApiResponse("Objeto N√£o Encontrado!"));
				apiResponses.addApiResponse("500", createApiResponse("Erro na Aplica√ß√£o!"));

			}));
		};
	}

	private ApiResponse createApiResponse(String message) {

		return new ApiResponse().description(message);

	}
	
	private SecurityScheme createSecurityScheme() {
	    return new SecurityScheme()
	        .name("jwt_auth")
	        .type(SecurityScheme.Type.HTTP)
	        .scheme("bearer")
	        .bearerFormat("JWT")
	        .description("Insira apenas o token JWT (a palavra 'Bearer' ser√° adicionada automaticamente)");
	}
}
```

<br />

<div align="left"><img src="https://i.imgur.com/IJNY0uR.png" title="source: imgur.com" width="4%"/> <a href="https://swagger.io/docs/specification/describing-parameters/" target="_blank"><b>Documenta√ß√£o: Paths and Operations</b></a></div>

<div align="left"><img src="https://i.imgur.com/IJNY0uR.png" title="source: imgur.com" width="4%"/> <a href="https://javadoc.io/static/io.swagger.core.v3/swagger-models/2.1.6/io/swagger/v3/oas/models/responses/ApiResponses.html" target="_blank"><b>Documenta√ß√£o: ApiResponses</b></a></div>

<div align="left"><img src="https://i.imgur.com/IJNY0uR.png" title="source: imgur.com" width="4%"/> <a href="https://javadoc.io/static/io.swagger.core.v3/swagger-models/2.1.6/io/swagger/v3/oas/models/Operation.html" target="_blank"><b>Documenta√ß√£o: Operation</b></a></div>

<div align="left"><img src="https://i.imgur.com/IJNY0uR.png" title="source: imgur.com" width="4%"/> <a href="https://javadoc.io/static/io.swagger.core.v3/swagger-models/2.1.6/io/swagger/v3/oas/models/PathItem.html" target="_blank"><b>Documenta√ß√£o: PathItem</b></a></div>

<br />

<h2>üë£ Passo 04 - Atualiza√ß√£o na Classe Usuario</h2>



Vamos configurar o atributo **`usuario`**, da classe **`Usuario`**, para que o Swagger exiba um lembrete indicando que o valor deve ser um **endere√ßo de e-mail**. Para isso, utilizaremos a anota√ß√£o **`@Schema`**, que faz parte da especifica√ß√£o **OpenAPI** e √© suportada pelo **Springdoc**.

A anota√ß√£o **`@Schema`** √© utilizada para **personalizar a documenta√ß√£o dos modelos de dados** (entidades, DTOs etc.) no Swagger. Ela permite definir metadados sobre cada campo de uma classe, como:

- **`description`** ‚Üí Descri√ß√£o do campo;
- **`name`** ‚Üí Nome exibido na documenta√ß√£o;
- **`type`** ‚Üí Tipo de dado (String, Integer, Boolean, entre outros.);
- **`example`** ‚Üí Exemplo de valor esperado;
- **`allowableValues`** ‚Üí Lista de valores permitidos.

Essas configura√ß√µes aparecem na **interface Swagger UI**, ajudando quem consome a API a entender o formato e a finalidade de cada campo.

Na Classe **Usuario**, localizada na **Camada Model**, acrescente no atributo **usuario** a anota√ß√£o abaixo:

```java
@Schema(example = "email@email.com.br")
```

Ap√≥s acrescentar a anota√ß√£o acima, o atributo usuario ter√° a seguinte configura√ß√£o:

```java
@Schema(example = "email@email.com.br")
@NotBlank(message = "O Atributo Usu√°rio √© Obrigat√≥rio!")
@Email(message = "O Atributo Usu√°rio deve ser um email v√°lido!")
private String usuario;
```

Ao executar a aplica√ß√£o e acessar o **Swagger UI**, o campo **`usuario`** ser√° exibido com o valor de exemplo configurado. Isso indica visualmente que o campo espera um e-mail v√°lido, conforme ilustrado na imagem abaixo:

<div align="center"><img src="https://i.imgur.com/itXOlCC.png" title="source: imgur.com" /></div>

Para utilizar a anota√ß√£o `@Schema`, √© necess√°rio importar o pacote indicado na imagem abaixo:

<div align="center"><img src="https://i.imgur.com/ulni8SN.png" title="source: imgur.com" /></div>

<br />

<div align="left"><img src="https://i.imgur.com/IJNY0uR.png" title="source: imgur.com" width="4%"/> <a href="https://javadoc.io/static/io.swagger.core.v3/swagger-models/2.1.6/io/swagger/v3/oas/models/media/Schema.html#example" target="_blank"><b>Documenta√ß√£o: @Schema</b></a></div>

<br />

<h2>üë£ Passo 05 - Executar o Swagger</h2>



Para abrir o Swagger:

1. Execute a aplica√ß√£o
2. Abra o seu navegador da Internet e digite o endere√ßo <a href="http://localhost:8080" ><b>http://localhost:8080</b></a> para abrir a sua documenta√ß√£o.
3. A Documenta√ß√£o no Swagger ser√° exibida, como mostra a imagem abaixo:

<div align="center"><img src="https://i.imgur.com/Zmiy4KY.png" title="source: imgur.com" /></div>

4. Observe que o Swagger ser√° inicializado com todos os endpoints protegidos bloqueados (os cadeados ao lado dos endpoints est√£o cinza - desabilitado), como vemos na imagem abaixo:

<div align="center"><img src="https://i.imgur.com/13pbx6k.png" title="source: imgur.com" /></div>

Para desbloquear, precisamos **Autenticar (logar) com um usu√°rio v√°lido** para obter o **Token JWT** e desta forma desbloquear o Swagger. Vamos criar um usu√°rio padr√£o, para autenticar na API e obter o token:

<br />

> [!WARNING]
>
> **√â obrigat√≥rio criar o usu√°rio `root@root.com.br`**, com a senha `rootroot`, pois ele ser√° utilizado pelos instrutores da turma para acessar e corrigir a API do Projeto Blog Pessoal.

<br />

1. Abra o Insomnia e crie o usu√°rio **root** com os dados da imagem abaixo:

<div align="center"><img src="https://i.imgur.com/ZmwdF2v.png" title="source: imgur.com" /></div>

2. Fa√ßa o login na aplica√ß√£o com a conta de usu√°rio usu√°rio **root@root.com.br**, que foi criada anteriormente.


<div align="center"><img src="https://i.imgur.com/zbcLoHl.png" title="source: imgur.com" /></div>

3. Copie apenas a parte codificada do token, ou seja, tudo menos a palavra **Bearer**, como mostra a imagem abaixo:

<div align="center"><img src="https://i.imgur.com/vc2Yo9w.png" title="source: imgur.com" /></div>

4. Volte para o Swagger e clique no bot√£o **Authorize**, localizado no lado direito da tela.

<div align="center"><img src="https://i.imgur.com/8YmwsLv.png" title="source: imgur.com" /></div>

5. Cole o token no campo **Value** e clique no bot√£o **Authorize**, como mostra a imagem abaixo:

<div align="center"><img src="https://i.imgur.com/T8jTylB.png" title="source: imgur.com" /></div>

6. Ser√° exibida a mensagem **Authorized** (Autorizado!). Clique no bot√£o **Close**.

<div align="center"><img src="https://i.imgur.com/z6mDHVf.png" title="source: imgur.com" /></div>

7. O Swagger est√° desbloqueado e pronto para uso. Observe que os cadeados est√£o todos na cor preta (desbloqueados).

<div align="center"><img src="https://i.imgur.com/iIn1Q0W.png" title="source: imgur.com" /></div>

Agora voc√™ conseguir√° testar todos os endpoints atrav√©s do Swagger!

<br />

> [!WARNING]
>
> O token gerado possui validade de **1 hora**. Ap√≥s esse per√≠odo, ser√° necess√°rio repetir o processo descrito acima para desbloquear novamente o acesso ao Swagger.

<br />

<div align="left"><img src="https://i.imgur.com/JACNZiR.png" title="source: imgur.com" width="4%"/> <a href="https://github.com/rafaelq80/backend_blogpessoal_spring/tree/13_Documentacao_Swagger" target="_blank"><b>C√≥digo fonte do Projeto</b></a></div>

<br /><br />

<div align="left"><a href="README.md"><img src="https://i.imgur.com/XMgF3gl.png" title="source: imgur.com" width="3%"/>Voltar</a></div>

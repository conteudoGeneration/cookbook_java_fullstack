

<h1>Projeto Blog Pessoal - Ajustes Finais - Parte 02</h1>



Dando continuidade ao processo de melhorias do Projeto Blog Pessoal, neste conte√∫do vamos substituir as mensagens de alertas criadas pela fun√ß√£o **alert()**, padr√£o do JavaScript, que n√£o possui um visual muito agrad√°vel, como vemos na imagem abaixo e adicionaremos uma Biblioteca de Alertas personalizados.

<div align="center"><img src="https://i.imgur.com/lSNPSo1.png" title="source: imgur.com" /></div>

Para personalizarmos os alertas, **instalaremos a Biblioteca React-Toastify**, que permite criar alertas personalizados, como mostra as imagens abaixo:

|                            Sucess                            |                            Error                             |                         Information                          |
| :----------------------------------------------------------: | :----------------------------------------------------------: | :----------------------------------------------------------: |
| <img src="https://i.imgur.com/O2hPUgF.png" title="source: imgur.com" /> | <img src="https://i.imgur.com/DEt4ZMN.png" title="source: imgur.com" /> | <img src="https://i.imgur.com/ETmb2BB.png" title="source: imgur.com" /> |

<br />

<h2>üë£Passo 01 - Instalar a Biblioteca React-toastify</h2>



Vamos instalar a Biblioteca **React Toastify**, respons√°vel por personalizar os alertas visuais do nosso projeto. Para isso, siga os passos abaixo.

1. Para instalar a Biblioteca **React Toastify**, abra o Terminal do VSCode
2. Digite o comando abaixo:

```bash
yarn add react-toastify
```

3. Ap√≥s a instala√ß√£o, ser√° exibida uma mensagem, semelhante a imagem abaixo:

<div align="center"><img src="https://i.imgur.com/Egp6hJG.png" title="source: imgur.com" /></div>

<br />

> [!IMPORTANT]
>
> **A vers√£o atual Biblioteca React Toastify pode ser diferente da vers√£o instalada, quando este material foi escrito.**

<br />

<div align="left"><img src="https://i.imgur.com/5DfLsp1.png" title="source: imgur.com" width="5%"/> <a href="https://fkhadra.github.io/react-toastify/installation" target="_blank"><b>Documenta√ß√£o React Toastify</b></a></div>

<br />

<h2><img src="https://i.imgur.com/izFuHID.png" title="source: imgur.com" width="4%"/>Passo 02 - Configurar Biblioteca React Toastify</h2>



Com a Biblioteca React Toastify instalada, iremos construir um arquivo TypeScript, que conter√° a l√≥gica e a estiliza√ß√£o dos alertas personalizados, sendo invocados de acordo com o processo que est√° sendo utilizado. Veja na tabela abaixo os tipos de alertas que ser√£o criados:

| Alert                                                        | Tipo            | Descri√ß√£o                                                    |
| ------------------------------------------------------------ | --------------- | ------------------------------------------------------------ |
| <img src="https://i.imgur.com/O2hPUgF.png" title="source: imgur.com" /> | **Sucess**      | Ser√° exibido sempre que uma a√ß√£o for bem sucedida. <br />**Exemplo:** *Usu√°rio autenticado com sucesso!* |
| <img src="https://i.imgur.com/DEt4ZMN.png" title="source: imgur.com" /> | **Error**       | Ser√° exibido sempre que uma a√ß√£o for mal sucedida ou gerar algum erro na aplica√ß√£o. <br />**Exemplo:** *Usu√°rio n√£o encontrado!* |
| <img src="https://i.imgur.com/ETmb2BB.png" title="source: imgur.com" /> | **Information** | Ser√° exibido sempre que for necess√°rio emitir um aviso para o usu√°rio. <br />**Exemplo:** *Voc√™ precisa estar Logado!* |

<br />

> [!TIP]
>
> No site oficial da **Biblioteca React Toastify** √© poss√≠vel gerar outros tipos de alerts, com outras customiza√ß√µes. Inclusive, o site possui uma ferramenta, que permite testar os alerts antes de utilizar no seu projeto. Depois de definir o modelo alert, √© s√≥ copiar o c√≥digo gerado e adicionar no seu projeto.

<br />

Vamos criar o arquivo **ToastAlerta.ts**, na pasta **utils**:

1. Dentro da pasta **src**, crie a pasta **utils** (letras min√∫sculas). 
2. Dentro da pasta **utils**, crie o arquivo **ToastAlerta.ts**.
3. Ap√≥s criar a pasta **utils** e o arquivo **ToastAlerta.ts**, a estrutura de seu projeto deve estar semelhante a imagem abaixo:

<div align="center"><img src="https://i.imgur.com/ncsH0DY.png" title="source: imgur.com" /></div>

4. Adicione o c√≥digo abaixo no arquivo **ToastAlerta.ts**:

```ts
import { toast } from 'react-toastify';

export function ToastAlerta(mensagem: string, tipo: string) {
    switch (tipo) {
            
        case 'sucesso':
            toast.success(mensagem, {
                position: 'top-right',
                autoClose: 2000,
                hideProgressBar: false,
                closeOnClick: true,
                pauseOnHover: false,
                draggable: false,
                theme: 'colored',
                progress: undefined,
            });
            break;

        case 'erro':
            toast.error(mensagem, {
                position: 'top-right',
                autoClose: 2000,
                hideProgressBar: false,
                closeOnClick: true,
                pauseOnHover: false,
                draggable: false,
                theme: 'colored',
                progress: undefined,
            });
            break;

            case 'info':
            default:
            toast.info(mensagem, {
                position: 'top-right',
                autoClose: 2000,
                hideProgressBar: false,
                closeOnClick: true,
                pauseOnHover: false,
                draggable: false,
                theme: 'colored',
                progress: undefined,
            });
            break;
    }
}
```

**Vamos analisar o c√≥digo:**

<div align="center"><img src="https://i.imgur.com/TFavGFt.png" title="source: imgur.com" /></div>

**Linha 01:** Importamos o Componente **toast** da Biblioteca **React-Toastify**.

**Linhas 03 a 58:** Constru√≠mos e exportamos uma fun√ß√£o, que encapsula a l√≥gica para exibir os alerts personalizados em nossa aplica√ß√£o. Essa fun√ß√£o possui um La√ßo Condicional **Switch/Case**, que gera um alert personalizado de acordo com o **tipo de alerta (sucesso, informa√ß√£o, erro)**. Al√©m disso, caso n√£o seja identificado o tipo de alerta, a estrutura gera um alert padr√£o do tipo informa√ß√£o. Observe que a fun√ß√£o possui 2 par√¢metros: **a mensagem e o tipo do alert**.

**Linhas 06 a 17:** Caso o **tipo** seja igual a **sucesso**, ser√° exibido o alert com as configura√ß√µes do tipo **sucess**, atrav√©s da fun√ß√£o de mesmo nome. Dentro dos par√™nteses dessa fun√ß√£o, o alert foi personalizado atrav√©s das propriedades da fun√ß√£o **sucess**. Al√©m das propriedades, tamb√©m foi adicionada a **mensagem** que ser√° exibida para o usu√°rio.

**Linhas 19 a 30:** Caso o **tipo** seja igual a **erro**, ser√° exibido o alert com as configura√ß√µes do tipo **error**, atrav√©s da fun√ß√£o de mesmo nome. Dentro dos par√™nteses dessa fun√ß√£o, o alert foi personalizado atrav√©s das propriedades da fun√ß√£o **error**. Al√©m das propriedades, tamb√©m foi adicionada a **mensagem** que ser√° exibida para o usu√°rio.

**Linhas 32 a 44:** Caso o **tipo** seja igual a **info** ou **vazio** (tipo n√£o informado), ser√° exibido o alert com as configura√ß√µes do tipo **info**, atrav√©s da fun√ß√£o de mesmo nome. Dentro dos par√™nteses dessa fun√ß√£o, o alert foi personalizado atrav√©s das propriedades da fun√ß√£o **info**. Al√©m das propriedades, tamb√©m foi adicionada a **mensagem** que ser√° exibida para o usu√°rio.

Para saber mais sobre as propriedades que forma utilizadas para personalizar os alerts, consulte a Documenta√ß√£o da **Biblioteca React Toastify** no link abaixo:

<br>

<div align="left"><img src="https://i.imgur.com/5DfLsp1.png" title="source: imgur.com" width="5%"/> <a href="https://fkhadra.github.io/react-toastify/introduction" target="_blank"><b>Documenta√ß√£o React Toastify</b></a></div>

<br />

<h2><img src="https://i.imgur.com/H9wEgsJ.png" title="source: imgur.com" width="5%"/>Passo 03 - Atualizar o Componente App</h2>



Para utilizar a **Biblioteca React Toastify** em todo o Projeto React, precisamos atualizar o Componente **App**, Importando a Folha de Estilo - CSS padr√£o da Biblioteca React Toastify e adicionando o Componente **ToastContainer**:

1. Abra o arquivo **App.tsx**, localizado na pasta **src**.
2. Adicione a linha de c√≥digo abaixo, contendo a importa√ß√£o da Folha de Estilo - CSS padr√£o da **Biblioteca React Toastify**,  depois da importa√ß√£o do Componente **Perfil**:

```tsx
import 'react-toastify/dist/ReactToastify.css';
```

<br />

> [!WARNING]
>
> Caso a Folha de Estilo - CSS **ReactToastify.css** n√£o seja importada, os alerts n√£o ser√£o exibidos corretamente na tela.

<br />

3. Adicione a linha de c√≥digo abaixo entre os Componentes **AuthProvider** e **BrowserRouter**:

```tsx
<ToastContainer />
```

4. N√£o se esque√ßa de importar o Componente **ToastContainer** da  **Biblioteca React Toastify**
5. Na imagem abaixo voc√™ confere o resultado final, com as indica√ß√µes das linhas que foram atualizadas:

<div align="center"><img src="https://i.imgur.com/jsKiLjb.png" title="source: imgur.com" /></div>

<br />

<h2><img src="https://i.imgur.com/H9wEgsJ.png" title="source: imgur.com" width="5%"/>Passo 04 - Atualizar os alertas dos Componentes AuthContext e Navbar</h2>



Para finalizar, precisamos **trocar os alertas de todas as P√°ginas e Componentes** do Projeto Blog Pessoal, pelos alertas personalizados. Vamos demonstrar como alterar os alertas atualizando os **Componentes AuthContext e Navbar**, que s√£o utilizados no processo de autentica√ß√£o (login):

1. Abra o componente **AuthContext.tsx**, localizado na pasta **src/contexts**.
2. Localize a fun√ß√£o **handleLogin()**. 
3. O c√≥digo da fun√ß√£o **handleLogin()** deve estar semelhante a imagem abaixo:

<div align="center"><img src="https://i.imgur.com/OsoliXK.png" title="source: imgur.com" /></div>

4. Vamos substituir a **linha 37** pela linha de c√≥digo abaixo:

```tsx
ToastAlerta("Usu√°rio foi autenticado com sucesso!", "sucesso")
```

5. Vamos substituir a **linha 41** pela linha de c√≥digo abaixo:

```tsx
ToastAlerta("Os dados do Usu√°rio est√£o inconsistentes!", "erro")
```

6. A fun√ß√£o **handleLogin()**, com o c√≥digo atualizado, voc√™ confere na imagem abaixo:

<div align="center"><img src="https://i.imgur.com/A3NLpN6.png" title="source: imgur.com" /></div>

Com estas altera√ß√µes, ao efetuar o login, ser√° exibido o alert personalizado do tipo **sucess**, caso o login tenha sido bem sucedido. Caso contr√°rio, ser√° exibido o alert do tipo **error**.

Na sequ√™ncia, vamos atualizar o Componente **Navbar**:

1. Abra o componente **Navbar.tsx**, localizado na pasta **src/components/navbar**.
2. Localize a fun√ß√£o **logout()**. 
3. O c√≥digo da fun√ß√£o **logout()** deve estar semelhante a imagem abaixo:

<div align="center"><img src="https://i.imgur.com/TjQtVyA.png" title="source: imgur.com" /></div>

4. Vamos substituir a **linha 14** pela linha de c√≥digo abaixo:

```tsx
ToastAlerta('O Usu√°rio foi desconectado com sucesso!', 'info')
```

5. A fun√ß√£o **logout()**, com o c√≥digo atualizado, voc√™ confere na imagem abaixo:

<div align="center"><img src="https://i.imgur.com/rmsCfWC.png" title="source: imgur.com" /></div>

Com esta altera√ß√£o, ao efetuar o logout, ser√° exibido o alert personalizado do tipo **info**, informando que o usu√°rio foi desconectado com sucesso.

<br />

<h2><img src="https://i.imgur.com/H9wEgsJ.png" title="source: imgur.com" width="5%"/>Passo 05 - Testar o Componente</h2>



1. Abra o Terminal do **VSCode**.
2. Execute o projeto atrav√©s do comando abaixo:

```bash
yarn dev
```

3. Pressione a combina√ß√£o de teclas **o + enter** do seu teclado para abrir o Projeto no Navegador.
4. Com o projeto aberto no seu Navegador, fa√ßa o login na aplica√ß√£o, informando o **Usu√°rio** e a **Senha**:

<div align="center"><img src="https://i.imgur.com/fZSZdDw.png" title="source: imgur.com" /></div>

5. Observe que ao efetuar o login com sucesso, o alerta personalizado do tipo **sucess**, ser√° exibido no canto superior direito da p√°gina home, como vemos na imagem abaixo:

<div align="center"><img src="https://i.imgur.com/4R0uJxa.png" title="source: imgur.com" /></div>

6. Caso o login n√£o seja bem sucedido, o alerta personalizado do tipo **error**, ser√° exibido no canto superior direito da p√°gina de login, como vemos na imagem abaixo:

<div align="center"><img src="https://i.imgur.com/litxzNX.png" title="source: imgur.com" /></div>

7. Ao efetuar o logout, o alerta personalizado do tipo **info**, ser√° exibido no canto superior direito da p√°gina de login, como vemos na imagem abaixo:

<div align="center"><img src="https://i.imgur.com/mNzXfIE.png" title="source: imgur.com" /></div>

<br />

<h2><img src="https://i.imgur.com/H9wEgsJ.png" title="source: imgur.com" width="5%"/>Passo 06 - Atualizar os Alertas de todas as P√†ginas e Componentes</h2>



Ap√≥s esta demonstra√ß√£o, **substitua os alertas de todas as P√°ginas e Componentes** do Projeto Blog Pessoal, pelos alertas personalizados, da mesma forma que fizemos nos exemplos do Passo 04 e teste toda a aplica√ß√£o, para verificar se todos os alertas est√£o corretos.

Na lista abaixo, voc√™ confere as P√°ginas e os Componentes que possuem alertas:

- *Cadastro*
- *Perfil*
- *ListaTemas*
- *ListaPostagens*
- *FormTema*
- *FormPostagem*
- *DeletarTema*
- *DeletarPostagem*

<br />

<div align="left"><img src="https://i.imgur.com/JACNZiR.png" title="source: imgur.com" width="5%"/> <a href="https://github.com/rafaelq80/blogpessoal_react_2024/tree/26_Alertas_Personalizados" target="_blank"><b>C√≥digo fonte do projeto</b></a></div>

<br /><br />

<div align="left"><a href="README.md"><img src="https://i.imgur.com/XMgF3gl.png" title="source: imgur.com" width="3%"/>Voltar</a></div>